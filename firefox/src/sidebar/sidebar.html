<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Webtero</title>
  <link rel="stylesheet" href="../styles/reset.css">
  <link rel="stylesheet" href="sidebar.css">
</head>
<body>
  <div class="sidebar">
    <header class="header">
      <h1>Webtero</h1>
      <button id="settingsBtn" title="Settings">⚙</button>
    </header>

    <details class="section current-page" open>
      <summary class="section-header">
        <span class="chevron">›</span>
        <h2>Current Page</h2>
      </summary>
      <div class="section-content">
        <div id="pageStatus" class="page-status">
          <p class="loading">Loading...</p>
        </div>

        <div id="pageActions" class="page-actions" style="display: none;">
          <div id="savedInfo" class="saved-info" style="display: none;">
            <p>✓ Saved to Zotero</p>
            <p class="meta" id="savedProject"></p>
            <p class="meta" id="savedDate"></p>
          </div>

          <div id="saveForm" class="save-form" style="display: none;">
            <select id="projectSelect" multiple size="5">
              <option value="">Loading projects...</option>
            </select>
            <button id="savePageBtn">Save to Zotero</button>
          </div>
        </div>
      </div>
    </details>

    <details class="section annotations" open>
      <summary class="section-header">
        <span class="chevron">›</span>
        <h2>Annotations</h2>
        <button id="refreshAnnotations" title="Refresh">↻</button>
      </summary>
      <div class="section-content">
        <div id="annotationsList" class="annotations-list">
          <p class="empty">No annotations yet. Highlight text on the page to create one.</p>
        </div>
      </div>
    </details>

    <details class="section projects" open>
      <summary class="section-header">
        <span class="chevron">›</span>
        <h2>Projects</h2>
        <button id="syncProjects" title="Sync from Zotero">↻</button>
        <button id="newProject" title="New Project">+</button>
      </summary>
      <div class="section-content">
        <div id="projectsList" class="projects-list">
          <p class="empty">No projects. Click sync to load from Zotero.</p>
        </div>
      </div>
    </details>

    <div id="newProjectModal" class="modal" style="display: none;">
      <div class="modal-content">
        <h3>Create New Project</h3>
        <form id="newProjectForm">
          <input type="text" id="projectName" placeholder="Project name" required>
          <select id="parentProject">
            <option value="">No parent (top-level)</option>
          </select>
          <div class="modal-actions">
            <button type="submit">Create</button>
            <button type="button" id="cancelProject">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="sidebar.js" type="module"></script>
</body>
</html>
